{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Metadata": {
        "AWS::CloudFormation::Designer": {
            "d744d3c9-d059-4cec-997b-12acdd36f71c": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 630,
                    "y": 220
                },
                "z": 0,
                "embeds": []
            },
            "758dab48-f5e9-4624-ae02-7c88adfddafe": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 540,
                    "y": 150
                },
                "z": 0,
                "embeds": []
            },
            "de5a062f-32f1-4101-afbe-d8959996f69b": {
                "size": {
                    "width": 140,
                    "height": 140
                },
                "position": {
                    "x": 330,
                    "y": 220
                },
                "z": 0,
                "embeds": []
            },
            "2c9e15b9-c7f5-4ec9-9161-4f589559dfbb": {
                "size": {
                    "width": 140,
                    "height": 140
                },
                "position": {
                    "x": 140,
                    "y": 130
                },
                "z": 0,
                "embeds": [],
                "iscontainedinside": [
                    "de5a062f-32f1-4101-afbe-d8959996f69b"
                ]
            },
            "ff6e88ff-d3fe-4e73-abcf-3f32cfcd63ec": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 372,
                    "y": 21
                },
                "z": 0,
                "embeds": [],
                "iscontainedinside": [
                    "2c9e15b9-c7f5-4ec9-9161-4f589559dfbb",
                    "de5a062f-32f1-4101-afbe-d8959996f69b"
                ]
            },
            "afce553f-84a3-4886-a050-3e181a24221b": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 560,
                    "y": 60
                },
                "z": 0,
                "embeds": []
            },
            "3ddf597d-9ac3-4491-baa5-f1b50f85944e": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 650,
                    "y": 60
                },
                "z": 0,
                "embeds": []
            },
            "b9541d83-be16-457a-92a9-6893a7027406": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 470,
                    "y": 70
                },
                "z": 0,
                "embeds": [],
                "isassociatedwith": [
                    "758dab48-f5e9-4624-ae02-7c88adfddafe"
                ]
            }
        }
    },
    "Resources": {
        "S3B4QNP2": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
                "BucketName": "jalkapallo-images-bucket",
                "AccessControl": "PublicRead"
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "d744d3c9-d059-4cec-997b-12acdd36f71c"
                }
            }
        },
        "AGRA47NBY": {
            "Type": "AWS::ApiGateway::RestApi",
            "Properties": {
                "Name": "JalkapalloAPI",
                "EndpointConfiguration": {
                    "Types": [
                        "REGIONAL"
                    ]
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "de5a062f-32f1-4101-afbe-d8959996f69b"
                }
            }
        },
        "AGR441XU": {
            "Type": "AWS::ApiGateway::Resource",
            "Properties": {
                "ParentId": {
                    "Fn::GetAtt": [
                        "AGRA47NBY",
                        "RootResourceId"
                    ]
                },
                "PathPart": "{proxy+}",
                "RestApiId": {
                    "Ref": "AGRA47NBY"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "2c9e15b9-c7f5-4ec9-9161-4f589559dfbb"
                }
            }
        },
        "AGM1V2W8": {
            "Type": "AWS::ApiGateway::Method",
            "Properties": {
                "HttpMethod": "ANY",
                "AuthorizationType": "NONE",
                "Integration": {
                    "IntegrationHttpMethod": "ANY",
                    "Type": "AWS_PROXY",
                    "Uri": {
                        "Fn::Sub": [
                            "arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${lambdaArn}/invocations",
                            {
                                "lambdaArn": {
                                    "Fn::GetAtt": [
                                        "LambdaFunction",
                                        "Arn"
                                    ]
                                }
                            }
                        ]
                    }
                },
                "RestApiId": {
                    "Ref": "AGRA47NBY"
                },
                "ResourceId": {
                    "Ref": "AGR441XU"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "ff6e88ff-d3fe-4e73-abcf-3f32cfcd63ec"
                }
            }
        },
        "LambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
                "FunctionName": "JalkapalloLambda",
                "MemorySize": 128,
                "Runtime": "nodejs8.10",
                "Code": {
                    "S3Bucket": "jalkapallo-deployment",
                    "S3Key": "deployment.zip"
                },
                "Handler": "lambda.handler",
                "Role": "arn:aws:iam::232619866597:role/service-role/jalkapaloRole"
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "758dab48-f5e9-4624-ae02-7c88adfddafe"
                }
            }
        },
        "DDBT2X28C": {
            "Type": "AWS::DynamoDB::Table",
            "Properties": {
                "TableName": "JalkapalloArticles",
                "KeySchema": [
                    {
                        "AttributeName": "id",
                        "KeyType": "HASH"
                    }
                ],
                "AttributeDefinitions": [
                    {
                        "AttributeName": "id",
                        "AttributeType": "S"
                    }
                ],
                "ProvisionedThroughput": {
                    "ReadCapacityUnits": 1,
                    "WriteCapacityUnits": 1
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "afce553f-84a3-4886-a050-3e181a24221b"
                }
            }
        },
        "DDBT4QQHB": {
            "Type": "AWS::DynamoDB::Table",
            "Properties": {
                "TableName": "JalkapalloImages",
                "KeySchema": [
                    {
                        "AttributeName": "id",
                        "KeyType": "HASH"
                    }
                ],
                "AttributeDefinitions": [
                    {
                        "AttributeName": "id",
                        "AttributeType": "S"
                    }
                ],
                "ProvisionedThroughput": {
                    "ReadCapacityUnits": 1,
                    "WriteCapacityUnits": 1
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "3ddf597d-9ac3-4491-baa5-f1b50f85944e"
                }
            }
        },
        "LP3VZC7": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
                "FunctionName": {
                    "Fn::GetAtt": [
                        "LambdaFunction",
                        "Arn"
                    ]
                },
                "Action": "lambda:InvokeFunction",
                "Principal": "apigateway.amazonaws.com",
                "SourceArn": {
                    "Fn::Sub": [
                        "arn:aws:execute-api:${AWS::Region}:${AWS::AccountId}:${AGRA47NBY}/*/*/*",
                        {}
                    ]
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "b9541d83-be16-457a-92a9-6893a7027406"
                }
            }
        }
    }
}